<?xml version="1.0" encoding="UTF-8"?>
<form xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Ui:etc/ui_configuration.xsd">
    <argument name="data" xsi:type="array">
        <item name="js_config" xsi:type="array">
            <item name="provider" xsi:type="string">automatedexport_form.automatedexport_form_data_source</item>
            <item name="deps" xsi:type="string">automatedexport_form.automatedexport_form_data_source</item>
        </item>
        <item name="label" xsi:type="string" translate="true">Object Information</item>
        <item name="config" xsi:type="array">
            <item name="dataScope" xsi:type="string">data</item>
            <item name="namespace" xsi:type="string">automatedexport_form</item>
        </item>
        <item name="template" xsi:type="string">templates/form/collapsible</item>
        <item name="buttons" xsi:type="array">
            <item name="back" xsi:type="string">DEG\CustomReports\Block\Adminhtml\AutomatedExport\Edit\BackButton</item>
            <item name="delete" xsi:type="string">DEG\CustomReports\Block\Adminhtml\AutomatedExport\Edit\DeleteButton</item>
            <item name="reset" xsi:type="string">DEG\CustomReports\Block\Adminhtml\AutomatedExport\Edit\ResetButton</item>
            <item name="save" xsi:type="string">DEG\CustomReports\Block\Adminhtml\AutomatedExport\Edit\SaveButton</item>
            <item name="save_and_continue" xsi:type="string">DEG\CustomReports\Block\Adminhtml\AutomatedExport\Edit\SaveAndContinueButton</item>
        </item>
    </argument>
    <dataSource name="automatedexport_form_data_source">
        <argument name="dataProvider" xsi:type="configurableObject">
            <argument name="class" xsi:type="string">DEG\CustomReports\Model\AutomatedExport\DataProvider</argument>
            <argument name="name" xsi:type="string">automatedexport_form_data_source</argument>
            <argument name="primaryFieldName" xsi:type="string">main_table.automatedexport_id</argument>
            <argument name="requestFieldName" xsi:type="string">automatedexport_id</argument>
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="submit_url" xsi:type="url" path="*/*/save"/>
                </item>
            </argument>
        </argument>
        <argument name="data" xsi:type="array">
            <item name="js_config" xsi:type="array">
                <item name="component" xsi:type="string">Magento_Ui/js/form/provider</item>
            </item>
        </argument>
    </dataSource>
    <fieldset name="general">
        <argument name="data" xsi:type="array">
            <item name="config" xsi:type="array">
                <item name="label" xsi:type="string">Automated Export Information</item>
                <item name="collapsible" xsi:type="boolean">false</item>
            </item>
        </argument>
        <field name="automatedexport_id">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="visible" xsi:type="boolean">false</item>
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="dataScope" xsi:type="string">automatedexport_id</item>
                </item>
            </argument>
        </field>
        <field name="title">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Title</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="sortOrder" xsi:type="number">10</item>
                    <item name="dataScope" xsi:type="string">title</item>
                    <item name="placeholder" xsi:type="string">Export to var/export folder daily at 3 am</item>
                    <item name="validation" xsi:type="array">
                        <item name="required-entry" xsi:type="boolean">true</item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="cron_expr">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Cron Expression</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="sortOrder" xsi:type="number">20</item>
                    <item name="dataScope" xsi:type="string">cron_expr</item>
                    <item name="placeholder" xsi:type="string">0 3 * * *</item>
                    <item name="validation" xsi:type="array">
                        <item name="required-entry" xsi:type="boolean">true</item>
                    </item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[E.g. 0 3 * * *.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="customreport_ids">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Custom Reports to Export</item>
                    <item name="formElement" xsi:type="string">multiselect</item>
                    <item name="sortOrder" xsi:type="number">30</item>
                    <item name="dataScope" xsi:type="string">customreport_ids</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[Hold down the 'Control' key to multi-select options.]]></item>
                    </item>
                </item>
                <item name="options" xsi:type="object">DEG\CustomReports\Model\Config\Source\CustomReports</item>

            </argument>
        </field>
        <field name="export_types">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Export Types</item>
                    <item name="formElement" xsi:type="string">multiselect</item>
                    <item name="sortOrder" xsi:type="number">40</item>
                    <item name="dataScope" xsi:type="string">export_types</item>
                    <item name="placeholder" xsi:type="string">0 3 * * *</item>
                    <item name="validation" xsi:type="array">
                        <item name="required-entry" xsi:type="boolean">true</item>
                    </item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA['Remote File Drop' and 'Email' export types both require a local file, which must be generated whether or not 'Local File Drop' is selected.]]></item>
                    </item>
                </item>
                <item name="options" xsi:type="object">DEG\CustomReports\Model\Config\Source\ExportTypes</item>

            </argument>
        </field>
        <field name="file_types">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">File Types</item>
                    <item name="formElement" xsi:type="string">multiselect</item>
                    <item name="sortOrder" xsi:type="number">50</item>
                    <item name="dataScope" xsi:type="string">file_types</item>
                    <item name="validation" xsi:type="array">
                        <item name="required-entry" xsi:type="boolean">true</item>
                    </item>
                </item>
                <item name="options" xsi:type="object">DEG\CustomReports\Model\Config\Source\FileTypes</item>

            </argument>
        </field>
        <field name="filename_pattern">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Filename Pattern</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="sortOrder" xsi:type="number">60</item>
                    <item name="dataScope" xsi:type="string">filename_pattern</item>
                    <item name="placeholder" xsi:type="string">%reportname%-%Y%-%m%-%d%-%h%-%i%-%s%</item>
                    <item name="validation" xsi:type="array">
                        <item name="required-entry" xsi:type="boolean">true</item>
                    </item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[E.g. %reportname%-%Y%-%m%-%d%-%h%-%i%-%s%. Available variables: %reportname%, %d%, %m%, %y%, %Y%, %h%, %i%, %s%.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="export_location">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Export Location</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="sortOrder" xsi:type="number">70</item>
                    <item name="dataScope" xsi:type="string">export_location</item>
                    <item name="placeholder" xsi:type="string">export/custom_report_exports</item>
                    <item name="validation" xsi:type="array">
                        <item name="required-entry" xsi:type="boolean">true</item>
                    </item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[E.g. export/custom_report_exports. The location of local files in the var/ directory.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="error_emails">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Error Email Address</item>
                    <item name="formElement" xsi:type="string">textarea</item>
                    <item name="rows" xsi:type="string">1</item>
                    <item name="sortOrder" xsi:type="number">75</item>
                    <item name="dataScope" xsi:type="string">error_emails</item>
                    <item name="placeholder" xsi:type="string">errors@test.com</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[E.g. errors@test.com, admin@test.com. If set, will email an error if something goes wrong during an export. Supports a comma-delimited list of emails.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="remote_host">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Remote Export Host</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="sortOrder" xsi:type="number">80</item>
                    <item name="dataScope" xsi:type="string">remote_host</item>
                    <item name="placeholder" xsi:type="string">(s)ftp.example.com</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[E.g. (s)ftp.example.com.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="remote_port">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Remote Export Port</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="sortOrder" xsi:type="number">90</item>
                    <item name="dataScope" xsi:type="string">remote_port</item>
                    <item name="placeholder" xsi:type="string">Defaults to 22 if left blank, use 21 for an FTP connection</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[Defaults to 22 if left blank, use 21 for an FTP connection.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="remote_username">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Remote Export Username</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="sortOrder" xsi:type="number">100</item>
                    <item name="dataScope" xsi:type="string">remote_username</item>
                    <item name="placeholder" xsi:type="string">(s)ftp_username</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[E.g. (s)ftp_username.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="remote_password">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="elementTmpl" xsi:type="string">DEG_CustomReports/form/element/password</item>
                    <item name="label" xsi:type="string">Remote Export Password</item>
                    <item name="visible" xsi:type="boolean">true</item>
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="sortOrder" xsi:type="number">110</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="dataScope" xsi:type="string">remote_password</item>
                    <item name="placeholder" xsi:type="string">(s)ftp_password123</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[E.g. (s)ftp_password123.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="remote_location">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Remote Export Location</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="sortOrder" xsi:type="number">120</item>
                    <item name="dataScope" xsi:type="string">remote_location</item>
                    <item name="placeholder" xsi:type="string">optional/(s)ftp/folder/here</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[E.g. optional/(s)ftp/folder/here.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="email_template" formElement="select">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Email Template</item>
                    <item name="dataScope" xsi:type="string">email_template</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[Email template used when "Email" export type is enabled.<br><br>A 'Custom Reports Combined Export Email' exists as a basic starting template for a 'combined' email to display multiple custom report names. But, only one 'default' (living in the codebase) template can be specified, so to use that email template, create a new email template in Marketing > Communications > Email Templates and click Load Template > DEG CustomReports > Custom Reports Combined Export Email.]]></item>
                    </item>
                </item>
                <item name="options" xsi:type="object">DEG\CustomReports\Model\Config\Source\ExportEmailTemplate</item>
            </argument>
        </field>
        <field name="email_recipients">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Email Recipient(s)</item>
                    <item name="formElement" xsi:type="string">textarea</item>
                    <item name="rows" xsi:type="string">1</item>
                    <item name="dataScope" xsi:type="string">email_recipients</item>
                    <item name="placeholder" xsi:type="string">email@example.com,email2@example.com</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description" xsi:type="string"><![CDATA[Comma-separated list of email recipients for the "Email" export type.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="email_sender">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Email Sender</item>
                    <item name="formElement" xsi:type="string">input</item>
                    <item name="dataScope" xsi:type="string">email_sender</item>
                    <item name="placeholder" xsi:type="string">email@example.com:Firstname Lastname</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description"
                              xsi:type="string"><![CDATA[E.g. email@example.com:Firstname Lastname. The colon separates the email sender's email address from the email sender's name. If unspecified, the email 'sender' will be the configuration specified in Stores > Settings > General > Store Email Addresses > General Contact. <br><br> Using a text input (instead of a select and 'Magento\Config\Model\Config \Source\Email\Identity' as the options) was chosen to allow for more customization.]]></item>
                    </item>
                </item>
            </argument>
        </field>
        <field name="is_combined_email">
            <argument name="data" xsi:type="array">
                <item name="config" xsi:type="array">
                    <item name="dataType" xsi:type="string">text</item>
                    <item name="label" xsi:type="string" translate="true">Send as one combined email</item>
                    <item name="formElement" xsi:type="string">select</item>
                    <item name="dataScope" xsi:type="string">is_combined_email</item>
                    <item name="placeholder" xsi:type="string">email@example.com:Firstname Lastname</item>
                    <item name="tooltip" xsi:type="array">
                        <item name="description"
                              xsi:type="string"><![CDATA[Default is 'No', which causes each report and filetype to produce its own email with one attachment. This is ideal for large reports that may hit the attachment size limit (either the limit configured on this Adobe Commerce server or the limit configured on the recipient's email system). <br><br> Set to 'Yes' to send one email per automation with all attachments included. Setting to 'Yes' may cause email failures if the attachment limit is hit. <br><br> If set to 'Yes', it may be desirable to create a custom email template that references each of the custom reports being generated. This is possible. Create a new email template in Marketing > Communications > Email Templates and click Load Template > DEG CustomReports > Custom Reports Combined Export Email for a starting point.]]></item>
                    </item>
                </item>
                <item name="options" xsi:type="object">Magento\Config\Model\Config\Source\Yesno</item>
            </argument>
        </field>
    </fieldset>
</form>
